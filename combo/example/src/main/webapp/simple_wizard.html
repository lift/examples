<!DOCTYPE html>
<html>

<head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type" />
  <title>Template</title>
</head>

<body data-lift-content-id="main">
  <div id="main" data-lift="surround?with=default2;at=content">
    <h2><span data-lift="Menu.title">%*%</span></h2>
    <nav aria-label="breadcrumb" role="navigation">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="index.html">Home</a>
        </li>
        <li class="breadcrumb-item">
          <a href="index.html">Templating</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page"><span data-lift="Menu.title">%*%</span></li>
      </ol>
    </nav>

    <div id="wrappedNoticeAtHead">
      <div data-lift="Msgs"></div>
    </div>

    <div data-lift="SimpleWizard"></div>

    <p>
      Code to generate. It's easier to use Wizard, but here's the "old fashioned" way.
    </p>

    <span class="badge badge-secondary">The
      <i>Lift</i> Scala code</span>
    <pre><code class="scala">/**
  * The Arc Challenge is Paul Graham's quest for web framework concision.
  *
  * http://www.paulgraham.com/arcchallenge.html
  *
  * This is one potential lift-based solution to it using StatefulSnippets.
  * There are doubtless many other ways.
  *
  * @author: Steve Jenson
  */
class SimpleWizard extends StatefulSnippet {
  val fromWhence = S.referer openOr "/"
  var dispatch: DispatchIt = {
    case _ =>
      xhtml =>
        pageOne
  }
  var name = ""
  var quest = ""
  var color = ""

  private def template(name: String, f: NodeSeq => NodeSeq): NodeSeq =
    Templates(List("templating") ::: List(name)).map(f) openOr
      NodeSeq.Empty

  /**
    * pageOne -- Ask the name
    */
  def pageOne = {
    def validate() {
      this.registerThisSnippet()
      if (name.length < 2) S.error(S.?("Name too short"))
      else
        dispatch = {
          case _ =>
            xhtml =>
              pageTwo
        }
    }

    template(
      "pageOne",
      ("#name" replaceWith text(name, name = _, "class" -> "form-control")) &
        ("#submit" replaceWith submit(S ? "Next",
                                      validate,
                                      "class" -> "btn btn-primary")))
  }

  /**
    * pageTwo -- Ask the quest
    */
  def pageTwo = {
    def validate() {
      this.registerThisSnippet()
      if (quest.length < 2) S.error(S.?("Quest too short"))
      else
        dispatch = {
          case _ =>
            xhtml =>
              pageThree
        }
    }

    template(
      "pageTwo",
      ("#quest" replaceWith text(quest, quest = _, "class" -> "form-control")) &
        ("#submit" replaceWith submit(S ? "Next",
                                      validate,
                                      "class" -> "btn btn-primary")))
  }

  /**
    * pageThree -- Ask the color
    */
  def pageThree = {
    def validate() {
      this.registerThisSnippet()
      if (!List("red", "yellow", "blue").contains(color.toLowerCase))
        S.error(S.?("Color not red, yellow or blue"))
      else {
        S.notice(
          "You, " + name + " on the quest " + quest + " may cross the bridge of sorrows")
        S.redirectTo(fromWhence)
      }
    }

    template(
      "pageThree",
      ("#color" replaceWith text(color, color = _, "class" -> "form-control")) &
        ("#submit" replaceWith submit(S ? "Finish",
                                      validate,
                                      "class" -> "btn btn-primary"))
    )
  }

}</code></pre>

  </div>
</body>

</html>