<!DOCTYPE html>
<html>

<head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type" />
  <title>Template</title>
</head>

<body data-lift-content-id="main">
  <div id="main" data-lift="surround?with=default2;at=content">

    <h2>JSON Samples</h2>
    <nav aria-label="breadcrumb" role="navigation">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="index.html">Home</a>
        </li>
        <li class="breadcrumb-item">
          <a href="interactive.html">Interactive Stuff</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">JSON Samples</li>
      </ol>
    </nav>

    <div id="wrappedNoticeAtHead">
      <div data-lift="Msgs"></div>
    </div>

    <h4>Example 1</h4>
    <div data-lift="JsonCall">
      <p>Enter an addition question:</p>

      <div class="form-row">
        <div class="form-inline">
          <input id="x" class="form-control mb-1 mr-sm-1 mb-sm-1">
          <label class="mr-sm-1">+</label>
          <input id="y" class="form-control mb-1 mr-sm-1 mb-sm-1">
          <label class="mr-sm-1">=</label>
          <input id="z" class="form-control mb-1 mr-sm-1 mb-sm-1">
          <button class="btn btn-primary form-control mb-1 mr-sm-1 mb-sm-1">Check</button>
        </div>
      </div>

    </div>

    <script type="text/javascript">
      // <![CDATA[
      function currentQuestion() {
        return {
          first: parseInt($('#x').val()),
          second: parseInt($('#y').val()),
          answer: parseInt($('#z').val())
        };
      }
      // ]]>
    </script>
    <span class="badge badge-secondary">The
      <i>Lift</i> Scala code</span>
    <pre><code class="scala">object JsonCall {

  private val logger = Logger(classOf[JsonCall])
  implicit val formats = DefaultFormats

  case class Question(first: Int, second: Int, answer: Int) {
    def valid_? = first + second == answer
  }

  def render = {

    def validate(value: JValue) : JsCmd = {
      logger.info(value)
      value.extractOpt[Question].map(_.valid_?) match {
        case Some(true) => Alert("Looks good")
        case Some(false) => Alert("That doesn't add up")
        case None => Alert("That doesn't make sense")
      }
    }

    "button [onclick]" #>
      SHtml.jsonCall( JE.Call("currentQuestion"), validate _ )
  }
}</code></pre>

  </div>
</body>

</html>